# 晋书AI
[**English**](README_EN.md) | **简体中文**


## 序
余以为晋氏之祚，钟灵毓秀。然天降祸乱，四海板荡，五胡扛鼎，七庙隳尊。有感于斯，常思古人兴亡之迹。

时甲子之岁，天下多故，瘟疫盛行。余闭门不出，得王氏《魏晋南北朝史》一书，昼夜研读，辄有会心。惜乎记性驽钝，览之既久，多所遗忘。遂发愤著述，立志传播华夏文明于四海。

余不揣固陋，创设西洋Youtube频道，以英语阐发我朝故事。每于撰文之际，常得《晋书》之助。初不谙文言，乃潜心钻研，译为英文。盖以浅白之言解深奥之理，始知古人用意之所在。

后因剪裁视频劳费太甚，遂辍笔焉。然译事未已，吾心系之。今春习得Python之法，颇究AI之理，然精力有限，此业遂搁。

近日公务稍闲，忽念AI之用，或可助吾译事。《廿四史》亿万言，《晋书》百三卷，惟余一人读之既终，岂非天意耶？

古人云："善始者实繁，克终者盖寡。"今借AI之力，完此未竟之业，岂不美哉！故吾用二日之時，作此腳本。

吾虽不才，愿效马迁之志，承先贤之绪，述晋氏盛衰，明得失之由。AI为助，古今相通，庶几不负此心耳。

## 介绍
用人话说，这就是一个用AI翻译md文件，把译文输出到docx并格式化的工具。
其实你翻译啥文档都行。

## 使用教程
1. [点我注册](https://api.bltcy.ai/register?aff=q3ue)柏拉图中转站，获取密钥。
   - 可使用OpenAI、Anthropic、Google等公司之大模型
   - 价格比官方便宜60%以上。
2. 可选：使用OpenAI密钥（需要修改转发地址）
3. 根目录创建`.env`文件，输入汝之密钥于`BLT_KEY`。
4. 安装[`uv`库](https://github.com/astral-sh/uv)，[Windows使用者点我下载](https://github.com/astral-sh/uv/releases/download/0.5.8/uv-x86_64-pc-windows-msvc.zip)。
5. 按需修改`main.py`之参数，命令行运行`uv run main.py`进行翻译。

## 获取数据
[《晋书》原始文本](https://ctext.org/wiki.pl?if=gb&res=788577&remap=gb)来自`中国哲学书电子化计划`。

该网站**严禁**自动爬取，需手动获取数据。
1. 打开一章节，Ctrl+A，Ctrl+C，Ctrl+V至md文件。
2. 删除前后多余文本，保证每一段前都有编号。

## 成本
以翻译《刘曜载记》为例：
原文11435字，共花费￥4.35（￥0.38/千字）。

## 项目结构
```
|- README.md  # 项目介绍
|- main.py  # 主脚本
|- translator  # 翻译模块
|  |- __init__.py  # 初始化文件
|  |- chatbot.py  # 聊天机器人模块
|  |- config.py  # 配置文件
|  |- formatter.py  # 格式化模块
|  |- prompts.py  # 指令模块
|  |- translator.py  # 翻译脚本
|  |- utils.py  # 工具模块
|
|- pyproject.toml  # 项目依赖文件
|- uv.lock  # uv依赖文件
```

## 未来展望
- [ ] 在上下文添加自定义知识库
- [ ] 保持名词翻译一致（如官职名）
- [ ] 自动建立人物索引
- [ ] 支持更多翻译引擎
- [ ] 支持原生Anthropic API
- [ ] 加入UI界面
